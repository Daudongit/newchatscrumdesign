

<div class="navbar-fixed">
  
    <nav>
    <div class="container-fluid">
      <div class="nav-wrapper">
          <div class="row">
              <div class="col m4">
                <a href="#!" class="brand-logo"><img src="/src/assets/image/scrum_logo.png" alt="nav-logo" class="logo"><span class="logo-text">ChatScrum</span></a>
              </div>
              <div class="col m4">
                <h5 id="project_title">Current Project: {{dataservice.project_name}}</h5>
             </div>
             <div class="col m4">
                <ul class="right hide-on-med-and-down">
                    <li id="username"> {{dataservice.username}} </li>
                <li><a (click)="logout()" id="logout">LOGOUT</a></li>
                </ul>
            </div>
          </div>
      </div>
    </div>
    </nav>
   
</div>


<div class=container>
    <div class="row">
        <div class="col m8 main_area">
            <!-- <h2><u>Currently Logged In As {{dataservice.username}} - {{dataservice.role}}</u></h2> -->
            
            
            <h3>{{dataservice.message}}</h3>
            <input type="checkbox" id="ourcheck" [checked]="show_zero" (click)="swapState()">
            <label for="ourcheck">Show Users With No Assigned Tasks</label> 
            <style>
                .full-box {
                    display: table-cell;
                    vertical-align: middle;
                    text-align: center;
                    border: 2px solid black;
                    padding: 10px;
                }
                .top-box {
                    display: table-cell;
                    font-size: 10pt;
                    vertical-align: middle;
                    text-align: center;
                    border: 1px solid gray;
                    border-top: 2px solid black;
                    padding: 10px;
                }
                .reg-box {
                    display: table-cell;
                    font-size: 10pt;
                    vertical-align: middle;
                    text-align: center;
                    border: 1px solid gray;
                    padding: 10px;
                }
            </style>
            <div style="display: table; table-layout: fixed; width: 600px; word-wrap: break-word; border-collapse: collapse; border: 2px solid black;">
                <div style="display: table-row">
                    <th colspan="6" class="full-box">Available Tasks</th>
                </div>
                <div style="display: table-row">
                    <th class="full-box">Created By</th>
                    <th class="full-box">Weekly Goal</th>
                    <th class="full-box">Daily Target</th>
                    <th class="full-box">Verify</th>
                    <th class="full-box">Done</th>
                    <th class="full-box">Remove</th>
                </div>
                <ng-container *ngFor="let user of dataservice.users">
                    <div *ngIf="user.scrumgoal_set.length == 0 && show_zero" style="display: table-row;" dragula="mainTable" [attr.id]="'u' + user.id">
                        <td class="full-box" id="author" colspan="6" (click)="dataservice.role == 'Owner' ? manageUser($event) : doNothing()">{{user.user.nickname}} - NO TASKS ASSIGNED</td>
                    </div>
                    <div style="display: table-row" *ngFor="let goal of user.scrumgoal_set; let j = index; let k = count" dragula="mainTable" [attr.id] = "goal.id">
                        <td *ngIf="j == 0" [attr.rowspan]="k" class="full-box" id="author" (click)="dataservice.role == 'Owner' ? manageUser($event) : doNothing()">
                            {{user.user.nickname}}
                            <a mz-button (click)="basicModal.openModal()" class="btn-floating btn waves-effect waves-light add-icon modal-trigger"><i class="material-icons">add</i></a>

                        </td>
                        <div *ngFor="let arrItem of arrCount" [ngClass]="j == 0 ? 'top-box' : 'reg-box'" [innerText]="goal.status == arrItem ? goal.goal_project_id + ') ' + goal.name : '-'" [attr.id]="goal.status == arrItem ? arrItem : 'blank'" (click)="goal.status == arrItem ? editGoal($event) : doNothing()"></div>
                        <div [ngClass]="j == 0 ? 'top-box' : 'reg-box'" id="remove">-</div>
                    </div>
                </ng-container>
            </div>
        </div>
        <div class="col m4">
            <mz-modal #basicModal>
                <mz-modal-header>
                    <h4>Add Task</h4>
                </mz-modal-header>
                <mz-modal-content>
                    <form (ngSubmit)="addGoal()">
                        <textarea rows="4" cols="35" id="goal" [(ngModel)]="dataservice.goal_name" name="goal"></textarea>
                        <br>
                        <input class="modal-close waves-effect btn btn-default" type="submit" value="Add Task">
                    </form>
                </mz-modal-content>
            </mz-modal>
        </div>
    </div>

    <div class="row right">
            <div class="col chat_area">
                    <div class=" card chat_space right">
                        <h3 style="text-align: center;">Chat Area</h3>
                        <hr>
                        <ul style="overflow: auto; height:100px; padding: 3px;">
                            <li *ngFor="let message of messages" [innerText]="message"></li>
                        </ul>
                        <input type="text" id="chat_text" name="chat_text" [(ngModel)]="chat_text">
                        <button class="btn btn-default send" (click)="sendMessage(chat_text)">Send Message</button>
                    </div>
                </div>
    </div>

</div>